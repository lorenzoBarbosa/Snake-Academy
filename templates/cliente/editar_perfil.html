{% extends "index.html" %}
{%block conteudo%}
<article>
    <div class="container-editar-perfil">
        <div class="editar-perfil">
            <div class="container-editar-imagem">
                <!-- templates/perfil/dados.html -->
                <!-- Container centralizado para foto atual -->
                 {% if not usuario.foto %}
                <div class="d-flex justify-content-center">
                    <img id="foto-atual"
                        src="{{ '/static/img/user-default.png' }}"
                        class="rounded-circle mb-3"
                        alt="Foto do perfil">
                </div>
                {% else %}
                <!-- Preview da nova foto (inicialmente oculto) -->
                <div id="preview-foto-container">
                    <div class="d-flex justify-content-center">
                        <img id="preview-foto"
                            src="{{ usuario.foto }}"
                            class="rounded-circle mb-2"
                            alt="Preview da nova foto">
                    </div>
                </div>
                {% endif %}
                <!-- Formulário de upload -->
                <form action="/cliente/editar-perfil/alterar-foto" method="post" enctype="multipart/form-data">
                    <div class="mb-2">
                        <label for="foto" class="form-label big">Selecionar Nova Foto</label>
                        <input type="file"
                            class="form-control form-control-sm"
                            id="foto"
                            name="foto"
                            accept="image/*">  <!-- ← Aceita apenas imagens -->
                        <div class="form-text small">JPG, JPEG ou PNG</div>
                    </div>
                    <button type="submit" class="btn btn-sm btn-outline-primary" id="btn-alterar">
                        <i class="bi-camera"></i> Alterar Foto
                    </button>
                    <button type="button" class="btn btn-sm btn-outline-secondary" id="btn-cancelar" onclick="cancelarSelecao()" style="display: none;">
                        <i class="bi-x"></i> Cancelar
                    </button>
                </form>
                {% if erro %}
                <div class="alert alert-danger mt-3" role="alert">
                    {{ erro }}
                </div>
                {% endif %}
            </div>
            <div class="container-editar-dados">
                <p class="titulo-editar-perfil">
                    Editar Perfil
                </p>
                <form action="/cliente/editar-perfil" method="post">
                    <label for="nome">Nome</label>
                    <input class="input-editar-perfil" type="text" id="nome" name="nome" value="{{ usuario.nome }}" placeholder="Nome" require>
                    <label for="email">Email</label>
                    <input class="input-editar-perfil" type="email" id="email" name="email" value="{{ usuario.email }}" placeholder="Email" required>
                    <label for="telefone">Telefone</label>
                    <input class="input-editar-perfil" type="tel" id="telefone" name="telefone" value="{{ usuario.telefone }}" placeholder="Telefone" required>
                    <label for="data_nascimento">Data de Nascimento</label>
                    <input class="input-editar-perfil" type="date" id="data_nascimento" name="data_nascimento" value="{{ usuario.dataNascimento }}" required>
                    <button class="botao-login botao-salvar" type="submit">Salvar</button>
                </form>
            </div>
        </div>
    </div>
</article>  
{%endblock%}