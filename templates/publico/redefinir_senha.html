{% extends "index_publico.html" %}
{% block conteudo %}
<script src="{{ url_for('static', path='js/scripts.js') }}"></script>
<div class="redefinir-alinhamento fundo-codigo-confirmacao">
  <div class="redefinir-card">
        <h2>Restaurar Senha</h2>
        <p class="descricao">Digite e confirme sua nova senha.</p>

        <form method="post" action="/redefinir_senha" novalidate>
        
        <!-- Mensagem de erro: requisitos não atendidos -->
        {% if erro_requisitos %}
            <div class="alert alert-danger">
                <strong>Requisitos não atendidos:</strong>
                <ul class="mb-0">
                    {% for erro in lista_erros %}
                        <li>{{ erro }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        <!-- Mensagem de erro: senhas não coincidem -->
        {% if erro_senha %}
            <div class="alert alert-danger">
                {{ mensagem_erro }}
            </div>
        {% endif %}

        <div class="mb-3">
            <label for="senha_nova" class="form-label">Nova Senha: </label>
            <input type="password" class="form-control {% if erro_senha or erro_requisitos %}is-invalid{% endif %}" id="senha_nova" name="senha_nova" placeholder="Digite uma Nova Senha:" required>
        
            <div id="barra-forca">
                <div id="nivel-forca"></div>
            </div>
            <p id="texto-forca"></p>
        </div>

        <div class="mb-3">
            <label for="senha_confirmacao" class="form-label">Confirme a Nova Senha: </label>
            <input  
            class="form-control {% if erro_senha or erro_requisitos %}is-invalid{% endif %}" 
            type="password"
            id="senha_confirmacao" 
            name="senha_confirmacao" 
            placeholder="Confirme sua Nova Senha:" 
            required
            >
        </div>

        <!-- Lista de requisitos da senha -->
        <div class="mb-3">
            <small class="text-muted">
                <strong>Requisitos da senha:</strong>
                <ul class="mb-0" style="font-size: 0.875rem;">
                    <li>Mínimo de 8 caracteres</li>
                    <li>Pelo menos uma letra MAIÚSCULA</li>
                    <li>Pelo menos uma letra minúscula</li>
                    <li>Pelo menos um número</li>
                    <li>Pelo menos um símbolo especial (!@#$%...)</li>
                </ul>
            </small>
        </div>

        <button class="btn btn-recuperar" type="submit">Enviar</button>
        </form>
    </div>
</div>
{% endblock %}